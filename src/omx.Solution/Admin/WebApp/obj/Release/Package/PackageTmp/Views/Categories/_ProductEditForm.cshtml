@model WebApp.Models.Product
<div id="productdlg" class="easyui-dialog"
     title="Product" style="width:600px;height:300px; display:none"
     data-options="
                iconCls: 'icon-more',
                modal:true,
                closed:true,
                cache: false,
                resizable:true,
                width:760,
                height:420,
                /*toolbar: [], 注解*/
                onOpen:function(){
                   $('#product_form').form('disableValidation');
                },
                buttons: [{
                    text:'确认',
                    iconCls:'icon-ok',
                    handler:function(){
                        confirm_productform();
                    }
                },{
                    text:'取消',
                    handler:function(){
                        $('#productdlg').dialog('close');
                    }
                }]
            ">
<div class="panel-container show">
      <div class="panel-content p-0">
        <form id="orderdetail_form" class="bv-form" novalidate="novalidate">
          <fieldset>
            <div class="panel-content">
              <div class="form-row">
    <!--Key-->
	@Html.HiddenFor(model => model.Id)		
             
    <!--名称-->
    <div class="col-md-6">
        <label class="form-label text-danger" for="@Html.IdFor(model => model.Name)" >@Html.DisplayNameFor(model => model.Name)</label>
		<input id="@Html.IdFor(model => model.Name)" 
							name="@Html.NameFor(model => model.Name)" 
							value="@Html.ValueFor(model => model.Name)"
							tabindex="1" 
			     			class="easyui-textbox" 
							type="text" 
                            style="width:100%"
							data-options="prompt:'@Html.DisplayNameFor(model => model.Name)',
     						 required:true ,validType:'length[0,50]'" />
    </div>
             
    <!--单位-->
    <div class="col-md-6">
        <label class="form-label " for="@Html.IdFor(model => model.Unit)" >@Html.DisplayNameFor(model => model.Unit)</label>
		<input id="@Html.IdFor(model => model.Unit)" 
							name="@Html.NameFor(model => model.Unit)" 
							value="@Html.ValueFor(model => model.Unit)"
							tabindex="2" 
			     			class="easyui-textbox" 
							type="text" 
                            style="width:100%"
							data-options="prompt:'@Html.DisplayNameFor(model => model.Unit)',
     						 required:false ,validType:'length[0,10]'" />
    </div>
             
    <!--单价-->
    <div class="col-md-6">
         <label class="form-label"><span class="required">@Html.DisplayNameFor(model => model.UnitPrice)</span></label>
         <input id="@Html.IdFor(model => model.UnitPrice)"
							name="@Html.NameFor(model => model.UnitPrice)" 
							value="@Html.ValueFor(model => model.UnitPrice)"
							tabindex="3" 
							class="easyui-numberbox" 
							type="text" 
                            style="width:100%"
							data-options="prompt:'@Html.DisplayNameFor(model => model.UnitPrice)',
                                 precision:2,
								 required:true,
                                 validType:'decimal' 
                                 " />
    </div>
             
    <!--库存-->
    <div class="col-md-6">
        <label class="form-label text-danger" for="@Html.IdFor(model => model.StockQty)" >@Html.DisplayNameFor(model => model.StockQty)</label>
		<input id="@Html.IdFor(model => model.StockQty)"
							name="@Html.NameFor(model => model.StockQty)" 
							value="@Html.ValueFor(model => model.StockQty)"
							tabindex="4" 
							class="easyui-numberbox" 
							type="text" 
                            style="width:100%"
							data-options="prompt:'@Html.DisplayNameFor(model => model.StockQty)',
								 required:true,
                                 validType:'mone' 
                                 " />
    </div>
             
         
        <!--是否需要QC-->
        <div class="col-md-6">
           <label class="form-label text-danger" for="@Html.IdFor(model => model.IsRequiredQc)" >@Html.DisplayNameFor(model => model.IsRequiredQc)</label>
           <div class="custom-control custom-checkbox">
                      <input id="@Html.IdFor(model => model.IsRequiredQc)"
                                   name="@Html.NameFor(model => model.IsRequiredQc)"
                                   value="true" @(Model.IsRequiredQc ? "checked=\"checked\"" : "")
                                   data-unchecked-value="false"
                                   tabindex="5"
                                   class="checkbox style-0"
                                   type="checkbox" />
                       <label class="custom-control-label" for="@Html.NameFor(model => model.IsRequiredQc)"> @Html.DisplayNameFor(model => model.IsRequiredQc)</label>
          
            </div>
         </div>
             
     <!--确认日期-->
     <div class="col-md-6">
          <label class="form-label"><span class="required">@Html.DisplayNameFor(model => model.ConfirmDateTime)</span></label>
		  <input id="@Html.IdFor(model => model.ConfirmDateTime)" 
							name="@Html.NameFor(model => model.ConfirmDateTime)" 
							tabindex="6" 
							class="easyui-datebox" 
                            type="text"
                            style="width:100%"
							value="@Html.ValueFor(model => model.ConfirmDateTime)"
							data-options="prompt:'@Html.DisplayNameFor(model => model.ConfirmDateTime)',
								 formatter:dateformatter,
                                 required:true " />
     </div>
             
      <!--产品类别-->
      <input type="hidden" id="CategoryName" name="CategoryName" value="">
	  <input id="@Html.IdFor(model => model.CategoryId)"
			       name="@Html.NameFor(model => model.CategoryId)"
				   value="@Html.ValueFor(model => model.CategoryId)"
                   type="hidden" />
             
  
           </div>
         </div>
       </fieldset>
    </form>
  </div>
</div>
</div>
<script type="text/javascript">
     var form_state = 'Added';
     var current_index = -1;
     var product = {};
 
     function open_productdlg(index, row, state) {
         form_state = state;
         current_index = index;
         product = row;
         $('#productdlg').dialog('open');
         if (form_state === 'Added') {
             $('#productdlg').dialog('setTitle', '新增明细');
         } else {
             $('#productdlg').dialog('setTitle', '修改明细');
         }
         $('#product_form').form('reset');
         $('#product_form').form('load', product);
     }
     function confirm_productform() {
         $productform = $('#product_form');
         if ($productform.form('enableValidation').form('validate')) {
             product = $productform.serializeJSON();
             if (form_state === 'Added') {
                 $(document).trigger('product_form.add', [current_index, product])
             } else {
                 $(document).trigger('product_form.edit', [current_index, product])
             }
             $('#productdlg').dialog('close');
         }
     }
 </script>

 